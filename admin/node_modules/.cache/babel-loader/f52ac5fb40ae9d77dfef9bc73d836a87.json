{"remainingRequest":"D:\\vue-node-fullstack\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\vue-node-fullstack\\admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\vue-node-fullstack\\admin\\src\\http.js","dependencies":[{"path":"D:\\vue-node-fullstack\\admin\\src\\http.js","mtime":1576590654638},{"path":"D:\\vue-node-fullstack\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-node-fullstack\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-node-fullstack\\admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcic7CnZhciBodHRwID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FkbWluL2FwaScKfSk7Cmh0dHAuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyBEbyBzb21ldGhpbmcgYmVmb3JlIHJlcXVlc3QgaXMgc2VudAogIGlmIChsb2NhbFN0b3JhZ2UudG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UudG9rZW47CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIGh0dHAucmVzcG9uc2XliqDkuIDkuKrmi6bmiKrlmags57uf5LiA6ZSZ6K+v5aSE55CGLOmAmueUqOeahOmUmeivr+WkhOeQhgoKaHR0cC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICByZXR1cm4gcmVzOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgaWYgKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHsKICAgIFZ1ZS5wcm90b3R5cGUuJG1lc3NhZ2UoewogICAgICB0eXBlOiAnZXJyb3InLAogICAgICBtZXNzYWdlOiBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICB9KTsKICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KCiAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2Uuc3RhdHVzKTsKICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqLwoKICAgIGlmIChlcnIucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpleHBvcnQgZGVmYXVsdCBodHRwOw=="},{"version":3,"sources":["D:/vue-node-fullstack/admin/src/http.js"],"names":["axios","Vue","router","http","create","baseURL","interceptors","request","use","config","localStorage","token","headers","Authorization","error","Promise","reject","response","res","err","data","message","prototype","$message","type","console","log","status","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAMC,IAAI,GAAGH,KAAK,CAACI,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAE;AADe,CAAb,CAAb;AAIAF,IAAI,CAACG,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAUC,MAAV,EAAkB;AAC9C;AACA,MAAIC,YAAY,CAACC,KAAjB,EAAwB;AACtBF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+B,YAAYH,YAAY,CAACC,KAAxD;AACD;;AACD,SAAOF,MAAP;AACD,CAND,EAMG,UAAUK,KAAV,EAAiB;AAClB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CATD,E,CAWA;;AACAX,IAAI,CAACG,YAAL,CAAkBW,QAAlB,CAA2BT,GAA3B,CAA+B,UAAAU,GAAG,EAAI;AACpC,SAAOA,GAAP;AACD,CAFD,EAEG,UAAAC,GAAG,EAAI;AACR,MAAIA,GAAG,CAACF,QAAJ,CAAaG,IAAb,CAAkBC,OAAtB,EAA+B;AAC7BpB,IAAAA,GAAG,CAACqB,SAAJ,CAAcC,QAAd,CAAuB;AACrBC,MAAAA,IAAI,EAAE,OADe;AAErBH,MAAAA,OAAO,EAAEF,GAAG,CAACF,QAAJ,CAAaG,IAAb,CAAkBC;AAFN,KAAvB;AAIA;;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAYP,GAAG,CAACF,QAAJ,CAAaU,MAAzB;AACA;;AACA,QAAIR,GAAG,CAACF,QAAJ,CAAaU,MAAb,KAAwB,GAA5B,EAAiC;AAC/BzB,MAAAA,MAAM,CAAC0B,IAAP,CAAY,QAAZ;AACD;AACF;;AACD,SAAOb,OAAO,CAACC,MAAR,CAAeG,GAAf,CAAP;AACD,CAhBD;AAkBA,eAAehB,IAAf","sourcesContent":["import axios from 'axios'\r\nimport Vue from 'vue'\r\nimport router from './router'\r\n\r\nconst http = axios.create({\r\n  baseURL: 'http://localhost:3000/admin/api'\r\n})\r\n\r\nhttp.interceptors.request.use(function (config) {\r\n  // Do something before request is sent\r\n  if (localStorage.token) {\r\n    config.headers.Authorization = 'Bearer ' + localStorage.token\r\n  }\r\n  return config;\r\n}, function (error) {\r\n  // Do something with request error\r\n  return Promise.reject(error);\r\n})\r\n\r\n// http.response加一个拦截器,统一错误处理,通用的错误处理\r\nhttp.interceptors.response.use(res => {\r\n  return res\r\n}, err => {\r\n  if (err.response.data.message) {\r\n    Vue.prototype.$message({\r\n      type: 'error',\r\n      message: err.response.data.message\r\n    })\r\n    /* eslint-disable no-console */\r\n    console.log(err.response.status);\r\n    /* eslint-enable no-console */\r\n    if (err.response.status === 401) {\r\n      router.push('/login')\r\n    }\r\n  }\r\n  return Promise.reject(err)\r\n})\r\n\r\nexport default http"]}]}